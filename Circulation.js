// MCQ Array CIRCULATION CHAPTER
const circulation_mcqs = [
  {
    question: "Which of the following valve is present in pulmonary aorta",
    options: [
      "a) A.V Valves",
      "b) Semilunar valves",
      "c) mitral valves",
      "d) tricuspid valves",
    ],
    answer: 1,
  },
  {
    question:
      "The control of movement of blood from Right atrium to right ventricle is conducted by",
    options: [
      "a) A.V Valves",
      "b) Semilunar valves",
      "c) mitral valves",
      "d) tricuspid valves",
    ],
    answer: 3,
  },
  {
    question:
      "Blood come from lower part of body to the heart for oxygenation through",
    options: [
      "a) Vena cava",
      "b) Sinuous concous",
      "c) Superior vena cava",
      "d) Inferior vena cava",
    ],
    answer: 3,
    explanation:
      "The inferior vena cava is the large vein that carries deoxygenated blood from the lower half of the body (legs, abdomen, pelvis) to the right atrium of the heart. From there, the blood is pumped to the lungs for oxygenation.",
  },
  {
    question: "Deoxygenated blood for oxygenation goes to lungs",
    options: [
      "a) Systematic function",
      "b) pulmonary function",
      "c) Single circuit",
      "d) Both A & B",
    ],
    answer: 1,
  },
  {
    question: "Major part of the heart wall made up of ",
    options: ["a) lipid", "b) mass", "c) cardiac muscles", "d) S.A Node"],
    answer: 2,
  },
  {
    question: "How many percentage of heart is present at left side",
    options: ["a) 30%", "b) 70%", "c) 85%", "d) 45%"],
    answer: 1,
  },
  {
    question: "All molluscs have open type of circulatory system except",
    options: ["a) octopus", "b) squid", "c) slug", "d) Both A & B"],
    answer: 3,
  },
  {
    question:
      "Single circuit circulation animals have oxygenated blood come from",
    options: [
      "a) Lungs",
      "b) gills",
      "c) skin",
      "d) All of them",
      "e) None of them",
    ],
    answer: 4,
  },
  {
    question: "Which of the following have exception blood circulation",
    options: ["a) Snake", "b) Lizard", "c) Tortoise", "d) crocodile"],
    answer: 3,
  },
  {
    question: "In ECG word Depolarization represents",
    options: [
      "a) Ventricle systole",
      "b) ventricle diastole",
      "c) Atrial systole",
      "d) Atrial diastole",
    ],
    answer: 0,
  },
  {
    question:
      "Movement of wave impulse which is generated from heat travel in the following sequence",
    options: [
      "a) A.V node > S.A Node > Bundle of his > Purkinje fibers",
      "b) S.A Node > A.V Node > Purkinje fibers > bundle of his",
      "c) S.A Node > A.V Node > bundle of his > Purkinje fibers",
      "d) A.V Node > S.A Node > bundle of his > Purkinje fibers",
    ],
    answer: 2,
  },
  {
    question: "Pacemakers are also known as",
    options: [
      "a) S.A Node",
      "b) A.V Node",
      "c) Bundle of his",
      "d) Purkinje fibers",
    ],
    answer: 0,
  },
  {
    question: "A normal ECG represents",
    options: [
      "a) heart is functioning properly",
      "b) Cardiac cycle performs normally",
      "c) wave of impulse from S.A Node move ethnically",
      "d) Both A & B",
      "e) All of these",
    ],
    answer: 4,
  },
  {
    question: "Which of the following is tiniest of all blood vessels",
    options: ["a) Venules", "b) Arterioles", "c) Aorta", "d) Capillaries"],
    answer: 3,
  },
  {
    question:
      "Which of the following carry deoxygenated blood, ignore exception",
    options: ["a) Veins", "b) Arteries", "c) Capillaries", "d) All of them"],
    answer: 0,
  },
  {
    question:
      "Sound of heart beat is “Lub Dub”, in the action Dub sound, what occurs",
    options: [
      "a) A.V Valves close",
      "b) Semilunar valve close",
      "c) A.V Valves open",
      "d) Semilunar valve open",
    ],
    answer: 1,
  },
  {
    question:
      "The pumping of oxygenated blood to the entire body is the action of",
    options: [
      "a) Left atrium",
      "b) Right ventricle",
      "c) Right atrium",
      "d) Left ventricle",
    ],
    answer: 3,
  },
  {
    question:
      "The blood comes from upper parts of the body towards heart through",
    options: [
      "a) Concous sinuous",
      "b) Venous concous",
      "c) Vena cava",
      "d) Superior vena cava",
    ],
    answer: 3,
  },
  {
    question:
      "Smooth muscles of blood vessels present in which layer of arteries",
    options: [
      "a) Tunica intima",
      "b) Tunica media",
      "c) Tunica externa",
      "d) Middle layer",
      "e) Both B & D",
    ],
    answer: 4,
  },
  {
    question: "Hepatic portal system circulation represents",
    options: [
      "a) blood movement between heart and intestine",
      "b) blood movement between heart and lungs",
      "c) blood movement between heart and liver",
      "d) blood movement between heart and kidney",
    ],
    answer: 2,
  },
  {
    question: "Drainage system is also known as",
    options: [
      "a) Immune system",
      "b) Circulation system",
      "c) Lymphatic system",
      "d) Respiration system",
    ],
    answer: 2,
  },
  {
    question: "Flat globules make how many percentage of interstitial fluid",
    options: ["a) 30%", "b) 45%", "c) 75%", "d) None of them"],
    answer: 3,
  },
  {
    question: "Which of the following is called silent killer",
    options: [
      "a) Hypotension",
      "b) Angina pectoris",
      "c) Hypertension",
      "d) Heart attack",
    ],
    answer: 2,
  },
  {
    question: "120/80 mm Hg of blood pressure represents",
    options: [
      "a) 80 shows systolic pressure and 120 represents diastolic pressure",
      "b) 120 represents systolic pressure and 80 represents diastolic pressure",
      "c) Both A & B",
      "d) Neither A & B",
    ],
    answer: 1,
  },
  {
    question: "Flow of blood pressure in blood vessels, correct sequence",
    options: [
      "a) Arteries > Aorta > Arterioles > capillary > venule > veins > vena cava",
      "b) Aorta > Arteries > Vena cava > veins > arterioles > venules > capillaries",
      "c) veins > Arteries > capillaries > venules > vena cava > arterioles > aorta",
      "d) Aorta > veins > vena cava > Arteries > arterioles > venule > capillaries",
    ],
    answer: 1,
  },
  {
    question: "A.V Valves represents",
    options: [
      "a) Bicuspid valve",
      "b) Tricuspid valve",
      "c) Mitral valve",
      "d) Both A & C",
      "e) All of them",
    ],
    answer: 4,
  },
  {
    question: "How many types of baroreceptors are",
    options: ["a) two", "b) three", "c) four", "d) one"],
    answer: 0,
  },
  {
    question:
      "Wave of impulse produced from S.A Node and travel to A.V Node, wave delayed for",
    options: ["a) 0.8 Sec", "b) 0.3 Sec", "c) 0.5 Sec", "d) 0.1 Sec"],
    answer: 3,
  },
  {
    question:
      "The cavity of left ventricle is narrower than cavity of right ventricle because of",
    options: [
      "a) more cardiac muscle",
      "b) Transfer of blood to whole body",
      "c) Due to high blood pressure",
      "d) Both A & B",
      "e) All of them",
    ],
    answer: 4,
  },
  {
    question: "Which of the following is also known as mitral valve",
    options: [
      "a) Tricuspid valve",
      "b) Bicuspid valve",
      "c) A.V Valves",
      "d) Semilunar valve",
    ],
    answer: 1,
  },
];

let currentPage = 1;
const perPage = 10;

// Shuffle questions so they appear in random order each time
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}
shuffleArray(circulation_mcqs);

let userAnswers = new Array(circulation_mcqs.length).fill(null);
let markedResults = new Array(circulation_mcqs.length).fill(null); // store "correct" or "wrong"

function renderPage() {
  const container = document.getElementById("mcqs-container");
  container.innerHTML = "";

  const start = (currentPage - 1) * perPage;
  const end = start + perPage;
  const pageMcqs = circulation_mcqs.slice(start, end);

  pageMcqs.forEach((mcq, index) => {
    const card = document.createElement("div");
    card.className = "mcq-card";
    const qIndex = start + index;

    // Heading with correct/wrong color if marked
    let headingClass = "";
    if (markedResults[qIndex] === "correct") headingClass = "correct-heading";
    else if (markedResults[qIndex] === "wrong") headingClass = "wrong-heading";

    card.innerHTML = `<h3 class="${headingClass}">Q${qIndex + 1}: ${mcq.question}</h3>`;

    mcq.options.forEach((option, i) => {
      const checked = userAnswers[qIndex] === i ? "checked" : "";
      let optionClass = "";
      if (markedResults[qIndex] === "correct" && i === mcq.answer) {
        optionClass = "correct";
      } else if (markedResults[qIndex] === "wrong") {
        if (i === mcq.answer) optionClass = "correct";
        else if (userAnswers[qIndex] === i) optionClass = "wrong";
      }

      card.innerHTML += `<label class="${optionClass}">
        <input type="radio" name="q${qIndex}" value="${i}" ${checked} onchange="saveAnswer(${qIndex}, ${i})">
        ${option}
      </label>`;
    });

    // Show explanation only after answers are checked
    if (markedResults[qIndex] !== null) {
      card.innerHTML += `<div class="explanation"><strong>Explanation:</strong> ${mcq.explanation}</div>`;
    }

    container.appendChild(card);
  });

  document.getElementById("prevBtn").disabled = currentPage === 1;
  document.getElementById("nextBtn").style.display =
    currentPage * perPage >= circulation_mcqs.length ? "none" : "inline-block";
  document.getElementById("checkBtn").style.display =
    currentPage * perPage >= circulation_mcqs.length ? "inline-block" : "none";
}

function saveAnswer(qIndex, answer) {
  userAnswers[qIndex] = answer;
}

function nextPage() {
  if (currentPage * perPage < circulation_mcqs.length) {
    currentPage++;
    renderPage();
  }
}

function prevPage() {
  if (currentPage > 1) {
    currentPage--;
    renderPage();
  }
}
function nextPage() {
  if (currentPage * perPage < circulation_mcqs.length) {
    currentPage++;
    renderPage();
    window.scrollTo({
      top: 0,
      behavior: "smooth"
    }); // scroll to top after rendering next page
  }
}

function prevPage() {
  if (currentPage > 1) {
    currentPage--;
    renderPage();
    // No scroll on previous page
  }
}


function checkAnswers() {
  // Check if any question is unanswered
  const unanswered = userAnswers.some((answer) => answer === null);
  if (unanswered) {
    alert("You must attempt all questions before checking the score!");
    return; // Stop function if not all answered
  }

  let score = 0;
  circulation_mcqs.forEach((mcq, index) => {
    if (userAnswers[index] === mcq.answer) {
      markedResults[index] = "correct";
      score++;
    } else {
      markedResults[index] = "wrong";
    }
  });

  document.getElementById(
    "final-score"
  ).innerHTML = `Your Total Score: ${score} / ${circulation_mcqs.length}`;
  document.getElementById("final-score").style.display = "block";

  renderPage(); // re-render to apply colors & show explanations
}

renderPage();


